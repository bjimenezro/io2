<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Programación Dinámica</title>
    <link rel="stylesheet" href="styles/styles.css">
</head>
<body>
    <header>
        <h1>Programación Dinámica</h1>
        <nav>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="teoria_colas.html">Teoría de Colas</a></li>
                <li><a href="programacion_dinamica.html">Programación Dinámica</a></li>
                <li><a href="programacion_no_lineal.html">Programación No Lineal</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <h2>Subtemas de Programación Dinámica</h2>
        <p>Explora los diferentes tipos de Programación Dinámica:</p>
        <ul>
            <li><a href="#distribucion-cientificos">Distribución de científicos entre grupos de investigación</a></li>
            <li><a href="#wyndor-glass">Modelo de línea de espera con un servidor y tiempos de servicio arbitrarios</a></li>
            <li><a href="#las-vegas">Modelo de múltiples servidores con tiempos de servicio arbitrarios y sin línea de espera</a></li>
            <li><a href="#problemas-asignacion">Problemas de asignación de recursos</a></li>
        </ul>

        <section id="distribucion-cientificos">
            <h3>Distribución de científicos entre grupos de investigación</h3>
            <p>Calcula la asignación óptima de científicos a proyectos para maximizar el beneficio total.</p>
        
            <h4>Calculadora de asignación óptima</h4>
            <form id="cientificos-form">
                <label for="num-cientificos">Número de científicos disponibles (\(N\)):</label>
                <input type="number" id="num-cientificos" min="1" required>
                <br>
                <label for="num-proyectos">Número de proyectos (\(M\)):</label>
                <input type="number" id="num-proyectos" min="1" required>
                <br>
                <label for="beneficios">Matriz de beneficios (separada por comas, filas por saltos de línea):</label>
                <textarea id="beneficios" rows="5" placeholder="Ejemplo:\n10,20,30\n5,15,25\n0,10,20"></textarea>
                <br>
                <button type="button" onclick="calcularDistribucion()">Calcular</button>
            </form>
        
            <div id="resultado-cientificos" style="margin-top: 20px; display: none;">
                <h4>Resultados:</h4>
                <p><strong>Beneficio máximo:</strong> <span id="beneficio-maximo"></span></p>
                <p><strong>Asignación óptima:</strong> <span id="asignacion"></span></p>
            </div>
        </section>
        
        <section id="wyndor-glass">
            <h3>Problema de la Wyndor Glass Company</h3>
            <p>Calcula la asignación óptima de recursos para maximizar la ganancia total.</p>
        
            <h4>Calculadora del problema de Wyndor Glass</h4>
            <form id="wyndor-form">
                <label for="unidades-producto1">Unidades de Producto 1 (\(x_1\)):</label>
                <input type="number" id="unidades-producto1" min="0" required>
                <br>
                <label for="unidades-producto2">Unidades de Producto 2 (\(x_2\)):</label>
                <input type="number" id="unidades-producto2" min="0" required>
                <br>
                <button type="button" onclick="calcularWyndor()">Calcular</button>
            </form>
        
            <div id="resultado-wyndor" style="margin-top: 20px; display: none;">
                <h4>Resultados:</h4>
                <p><strong>Ganancia total:</strong> <span id="ganancia-total"></span></p>
                <p><strong>Restricciones cumplidas:</strong> <span id="restricciones-cumplidas"></span></p>
            </div>
        </section>

        <section id="las-vegas">
            <h3>La Ganadora en Las Vegas</h3>
            <p>Calcula la probabilidad máxima de alcanzar una meta antes de quedarte sin dinero.</p>
        
            <h4>Calculadora probabilística</h4>
            <form id="vegas-form">
                <label for="cantidad-inicial">Cantidad inicial (\( S \)):</label>
                <input type="number" id="cantidad-inicial" min="1" required>
                <br>
                <label for="meta">Meta (\( T \)):</label>
                <input type="number" id="meta" min="1" required>
                <br>
                <label for="probabilidad">Probabilidad de ganar una apuesta (\( p \)):</label>
                <input type="number" id="probabilidad" step="0.01" min="0" max="1" required>
                <br>
                <button type="button" onclick="calcularVegas()">Calcular</button>
            </form>
        
            <div id="resultado-vegas" style="margin-top: 20px; display: none;">
                <h4>Resultados:</h4>
                <p><strong>Probabilidad máxima:</strong> <span id="probabilidad-maxima"></span></p>
            </div>
        </section>

    </main>
    <footer>
        <p>&copy; 2024 Investigación Operativa II</p>
    </footer>

    <script>
        function calcularDistribucion() {
            const N = parseInt(document.getElementById("num-cientificos").value);
            const M = parseInt(document.getElementById("num-proyectos").value);
            const beneficiosTexto = document.getElementById("beneficios").value;
        
            if (isNaN(N) || isNaN(M) || N <= 0 || M <= 0 || !beneficiosTexto) {
                alert("Por favor, ingresa valores válidos.");
                return;
            }
        
            // Parsear matriz de beneficios
            const beneficios = beneficiosTexto
                .trim()
                .split("\n")
                .map(row => row.split(",").map(Number));
        
            if (beneficios.length !== M || beneficios.some(row => row.length !== N + 1)) {
                alert("La matriz de beneficios no tiene el formato correcto.");
                return;
            }
        
            // Programación dinámica
            const dp = Array.from({ length: M + 1 }, () => Array(N + 1).fill(0));
            const decisiones = Array.from({ length: M + 1 }, () => Array(N + 1).fill(0));
        
            for (let i = 1; i <= M; i++) {
                for (let n = 0; n <= N; n++) {
                    for (let j = 0; j <= n; j++) {
                        const beneficio = beneficios[i - 1][j] + dp[i - 1][n - j];
                        if (beneficio > dp[i][n]) {
                            dp[i][n] = beneficio;
                            decisiones[i][n] = j;
                        }
                    }
                }
            }
        
            // Reconstruir la solución
            let asignacion = [];
            let nRestante = N;
            for (let i = M; i >= 1; i--) {
                asignacion.unshift(decisiones[i][nRestante]);
                nRestante -= decisiones[i][nRestante];
            }
        
            // Mostrar resultados
            document.getElementById("beneficio-maximo").textContent = dp[M][N];
            document.getElementById("asignacion").textContent = asignacion.join(", ");
            document.getElementById("resultado-cientificos").style.display = "block";
        }

        function calcularWyndor() {
            const x1 = parseInt(document.getElementById("unidades-producto1").value);
            const x2 = parseInt(document.getElementById("unidades-producto2").value);

            if (isNaN(x1) || isNaN(x2) || x1 < 0 || x2 < 0) {
                alert("Por favor, ingresa valores válidos.");
                return;
            }

            // Restricciones
            const taller1 = x1 <= 4;
            const taller2 = 2 * x1 + 3 * x2 <= 12;
            const taller3 = 2 * x2 <= 18;

            // Ganancia total
            const gananciaTotal = 3 * x1 + 5 * x2;

            // Mostrar resultados
            document.getElementById("ganancia-total").textContent = gananciaTotal.toFixed(2);
            document.getElementById("restricciones-cumplidas").textContent = 
                taller1 && taller2 && taller3 ? "Sí" : "No";

            document.getElementById("resultado-wyndor").style.display = "block";
        }

        function calcularVegas() {
            const S = parseInt(document.getElementById("cantidad-inicial").value);
            const T = parseInt(document.getElementById("meta").value);
            const p = parseFloat(document.getElementById("probabilidad").value);

            if (isNaN(S) || isNaN(T) || isNaN(p) || S <= 0 || T <= 0 || p < 0 || p > 1) {
                alert("Por favor, ingresa valores válidos.");
                return;
            }

            if (S >= T) {
                alert("La cantidad inicial ya alcanza la meta.");
                return;
            }

            // Inicialización del arreglo
            const dp = Array(T + 1).fill(0);
            dp[T] = 1; // Condición de frontera

            // Resolver usando programación dinámica
            for (let s = T - 1; s >= 0; s--) {
                let maxProb = 0;
                for (let x = 1; x <= s; x++) {
                    const prob = p * dp[Math.min(s + x, T)] + (1 - p) * dp[Math.max(s - x, 0)];
                    maxProb = Math.max(maxProb, prob);
                }
                dp[s] = maxProb;
            }

            // Mostrar resultados
            document.getElementById("probabilidad-maxima").textContent = dp[S].toFixed(4);
            document.getElementById("resultado-vegas").style.display = "block";
        }
    </script>
        
</body>
</html>
