<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teoría de Colas</title>
    <link rel="stylesheet" href="styles/styles.css">
</head>
<body>
    <header>
        <h1>Teoría de Colas</h1>
        <nav>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="teoria_colas.html">Teoría de Colas</a></li>
                <li><a href="programacion_dinamica.html">Programación Dinámica</a></li>
                <li><a href="programacion_no_lineal.html">Programación No Lineal</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <h2>Subtemas de Teoría de Colas</h2>
        <p>Explora los diferentes modelos y problemas relacionados con las líneas de espera:</p>
        <ul>
            <li><a href="#modelo-un-servidor">Modelo de línea de espera con un servidor y llegadas Poisson y tiempos de servicio exponenciales</a></li>
            <li><a href="#modelo-multiples-servidores">Modelo de línea de espera con múltiples servidores y llegadas Poisson y tiempos de servicio exponenciales</a></li>
            <li><a href="#modelo-fuentes-finitas">Modelos de línea de espera con fuentes finitas</a></li>
            <li><a href="#problemas-asignacion">Problemas de asignación de recursos</a></li>
        </ul>

        <section id="modelo-un-servidor">
            <h3>Modelo de línea de espera con un servidor y llegadas Poisson y tiempos de servicio exponenciales</h3>
            <p>Este modelo describe una situación donde hay una sola estación de servicio y las llegadas de los clientes se distribuyen de forma Poisson, mientras que los tiempos de servicio tienen una distribución exponencial. Es conocido como el modelo <strong>M/M/1</strong>.</p>

            <h4>Calculadora del Modelo M/M/1</h4>
            <form id="mm1-form">
                <label for="lambda">Tasa de llegada (\(\lambda\)):</label>
                <input type="number" id="lambda" step="any" required>
                <br>
                <label for="mu">Tasa de servicio (\(\mu\)):</label>
                <input type="number" id="mu" step="any" required>
                <br>
                <button type="button" onclick="calcularMM1()">Calcular</button>
            </form>

            <div id="resultado-mm1" style="margin-top: 20px; display: none;">
                <h4>Resultados:</h4>
                <p><strong>Factor de utilización (\(\rho\)):</strong> <span id="rho"></span></p>
                <p><strong>Número promedio en el sistema (\(L\)):</strong> <span id="l"></span></p>
                <p><strong>Tiempo promedio en el sistema (\(W\)):</strong> <span id="w"></span></p>
            </div>
        </section>

        <section id="modelo-multiples-servidores">
            <h3>Modelo de línea de espera con múltiples servidores y llegadas Poisson y tiempos de servicio exponenciales</h3>
            <p>Este modelo, conocido como <strong>M/M/c</strong>, generaliza el modelo M/M/1 al incluir múltiples servidores. Se utiliza para analizar sistemas como centros de llamadas o filas de cajas en supermercados.</p>
        
            <h4>Calculadora del Modelo M/M/c</h4>
            <form id="mmc-form">
                <label for="lambda-c">Tasa de llegada (\(\lambda\)):</label>
                <input type="number" id="lambda-c" step="any" required>
                <br>
                <label for="mu-c">Tasa de servicio (\(\mu\)):</label>
                <input type="number" id="mu-c" step="any" required>
                <br>
                <label for="c">Número de servidores (\(c\)):</label>
                <input type="number" id="c" step="1" required>
                <br>
                <button type="button" onclick="calcularMMC()">Calcular</button>
            </form>
        
            <div id="resultado-mmc" style="margin-top: 20px; display: none;">
                <h4>Resultados:</h4>
                <p><strong>Factor de utilización (\(\rho\)):</strong> <span id="rho-c"></span></p>
                <p><strong>Probabilidad de que todos los servidores estén ocupados (\(P_0\)):</strong> <span id="p0"></span></p>
                <p><strong>Número promedio en el sistema (\(L\)):</strong> <span id="l-c"></span></p>
                <p><strong>Tiempo promedio en el sistema (\(W\)):</strong> <span id="w-c"></span></p>
            </div>
        </section>        

        <section id="modelo-fuentes-finitas">
            <h3>Modelos de línea de espera con fuentes finitas</h3>
            <p>En estos modelos, la cantidad de clientes potenciales está limitada a una población finita. Esto afecta la tasa de llegadas y el comportamiento del sistema.</p>
        </section>

        <section id="problemas-asignacion">
            <h3>Problemas de asignación de recursos</h3>
            <p>Estos problemas están relacionados con cómo asignar de manera óptima los recursos disponibles (como servidores o máquinas) para minimizar costos o maximizar la eficiencia del sistema.</p>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 Investigación Operativa II</p>
    </footer>

    <script>
        function calcularMM1() {
            // Obtener valores del formulario
            const lambda = parseFloat(document.getElementById("lambda").value);
            const mu = parseFloat(document.getElementById("mu").value);

            // Validar entrada
            if (isNaN(lambda) || isNaN(mu) || lambda <= 0 || mu <= 0) {
                alert("Por favor, ingresa valores válidos para λ y μ.");
                return;
            }

            if (lambda >= mu) {
                alert("El sistema no es estable. La tasa de llegada (λ) debe ser menor que la tasa de servicio (μ).");
                return;
            }

            // Calcular métricas
            const rho = lambda / mu;
            const l = rho / (1 - rho);
            const w = 1 / (mu - lambda);

            // Mostrar resultados
            document.getElementById("rho").textContent = rho.toFixed(2);
            document.getElementById("l").textContent = l.toFixed(2);
            document.getElementById("w").textContent = w.toFixed(2);

            document.getElementById("resultado-mm1").style.display = "block";
        }

        function calcularMMC() {
        // Obtener valores del formulario
        const lambda = parseFloat(document.getElementById("lambda-c").value);
        const mu = parseFloat(document.getElementById("mu-c").value);
        const c = parseInt(document.getElementById("c").value);

        // Validar entrada
        if (isNaN(lambda) || isNaN(mu) || isNaN(c) || lambda <= 0 || mu <= 0 || c <= 0) {
            alert("Por favor, ingresa valores válidos para λ, μ y c.");
            return;
        }

        const rho = lambda / (c * mu);
        if (rho >= 1) {
            alert("El sistema no es estable. Asegúrate de que la tasa de llegada sea menor que la capacidad de servicio total.");
            return;
        }

        // Calcular P0 usando la fórmula de Erlang-C
        let sum = 0;
        for (let n = 0; n < c; n++) {
            sum += Math.pow(lambda / mu, n) / factorial(n);
        }
        const p0 = 1 / (sum + (Math.pow(lambda / mu, c) / (factorial(c) * (1 - rho))));

        // Calcular L y W
        const lq = (Math.pow(lambda / mu, c) * rho * p0) / (factorial(c) * Math.pow(1 - rho, 2));
        const l = lq + (lambda / mu);
        const w = l / lambda;

        // Mostrar resultados
        document.getElementById("rho-c").textContent = rho.toFixed(2);
        document.getElementById("p0").textContent = p0.toFixed(4);
        document.getElementById("l-c").textContent = l.toFixed(2);
        document.getElementById("w-c").textContent = w.toFixed(2);

        document.getElementById("resultado-mmc").style.display = "block";
        }

        // Función para calcular el factorial
        function factorial(n) {
            if (n === 0 || n === 1) return 1;
            let result = 1;
            for (let i = 2; i <= n; i++) {
                result *= i;
            }
            return result;
        }
    </script>
</body>
</html>
